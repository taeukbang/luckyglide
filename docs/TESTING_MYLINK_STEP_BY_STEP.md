# 마이링크 테스트 - 초보자용 단계별 가이드

## 🎯 목표
Supabase에 마이링크를 저장할 테이블을 만드는 것입니다.

---

## 1단계: Supabase 대시보드 접속하기

### 1-1. Supabase 웹사이트 접속
1. 브라우저를 엽니다 (Chrome, Safari 등)
2. 주소창에 다음을 입력하고 Enter를 누릅니다:
   ```
   https://supabase.com
   ```

### 1-2. 로그인 또는 회원가입
- **이미 계정이 있다면**: 오른쪽 위의 "Sign In" 버튼 클릭
- **계정이 없다면**: "Start your project" 버튼 클릭 → 회원가입 진행

### 1-3. 프로젝트 선택
- 로그인 후 대시보드가 나타납니다
- 이미 프로젝트가 있다면: 프로젝트 목록에서 **LuckyGlide 프로젝트**를 클릭
- 프로젝트가 없다면: "New Project" 버튼을 클릭하여 새 프로젝트 생성

---

## 2단계: SQL Editor 찾기

### 2-1. 왼쪽 메뉴 확인
Supabase 대시보드 왼쪽에 메뉴가 있습니다. 다음 중 하나를 찾습니다:

**방법 1: 직접 찾기**
- 왼쪽 메뉴에서 **"SQL Editor"** 또는 **"SQL"** 아이콘을 찾아 클릭
- 아이콘 모양: 보통 코드 괄호 `<>` 또는 데이터베이스 아이콘

**방법 2: 메뉴 탐색**
- 왼쪽 메뉴를 아래로 스크롤하면서 찾기
- 메뉴 항목들:
  - Table Editor
  - Authentication
  - Database
  - **SQL Editor** ← 이걸 찾으세요!
  - Storage
  - Edge Functions
  - 등등...

### 2-2. SQL Editor 화면 확인
SQL Editor를 클릭하면 다음과 같은 화면이 나타납니다:
- 왼쪽: SQL 쿼리를 입력하는 큰 텍스트 박스
- 오른쪽 또는 아래: 실행 결과를 보여주는 영역
- 위쪽: "New query" 버튼이 있을 수 있습니다

---

## 3단계: SQL 쿼리 복사하기

### 3-1. 프로젝트 폴더에서 파일 찾기

**방법 1: Cursor(코드 에디터)에서 열기 (가장 쉬운 방법)**

1. Cursor를 엽니다 (지금 보고 있는 프로그램입니다!)
2. 왼쪽에 파일 목록이 보일 것입니다
3. 파일 목록에서 `server` 폴더를 찾아 클릭합니다
4. `server` 폴더가 펼쳐지면 `schema.sql` 파일을 찾아 클릭합니다
5. 파일이 열리면 오른쪽에 내용이 보입니다!

**방법 2: Finder(Mac)에서 열기**

1. Finder를 엽니다 (Mac의 파일 관리 프로그램)
2. 왼쪽 사이드바에서 "Documents"를 클릭합니다
3. "GitHub" 폴더를 찾아 클릭합니다
4. "luckyglide" 폴더를 찾아 클릭합니다
5. "server" 폴더를 찾아 클릭합니다
6. "schema.sql" 파일을 찾아 더블클릭합니다
7. 파일이 텍스트 에디터(TextEdit 등)에서 열립니다

**방법 3: 터미널에서 열기**

1. 터미널을 엽니다
2. 다음 명령어를 입력하고 Enter를 누릅니다:
   ```bash
   cd /Users/sujung-hong/Documents/GitHub/luckyglide
   open server/schema.sql
   ```
3. 파일이 기본 텍스트 에디터에서 열립니다

**방법 4: Cursor에서 직접 파일 열기**

1. Cursor 상단 메뉴에서 `File` → `Open File...` 클릭
2. 또는 단축키: `Cmd + O` (Mac) 또는 `Ctrl + O` (Windows)
3. 파일 선택 창이 나타나면:
   - `/Users/sujung-hong/Documents/GitHub/luckyglide/server/schema.sql` 경로로 이동
   - `schema.sql` 파일을 선택하고 "열기" 클릭

### 3-2. 필요한 SQL 코드 찾기
`schema.sql` 파일에서 다음 부분을 찾습니다 (파일 끝부분에 있을 것입니다):

```sql
-- Partner MyLinks: 마이링크 저장 테이블
-- 파트너별 예약 URL과 변환된 마이링크를 저장
create table if not exists public.partner_mylinks (
  id bigint generated by default as identity primary key,
  partner_id text not null,
  "from" text not null,
  "to" text not null,
  departure_date date not null,
  return_date date not null,
  trip_days int,
  nonstop boolean default false,
  booking_url text not null, -- 원본 예약 URL
  mylink text not null, -- 변환된 마이링크
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now(),
  constraint partner_mylinks_unique unique(partner_id, "from", "to", departure_date, return_date, trip_days, nonstop)
);

-- 인덱스
create index if not exists idx_partner_mylinks_lookup on public.partner_mylinks (partner_id, "from", "to", departure_date, return_date, trip_days, nonstop);
create index if not exists idx_partner_mylinks_partner on public.partner_mylinks (partner_id);
```

### 3-3. 코드 복사하기
1. 위의 SQL 코드 전체를 마우스로 드래그하여 선택합니다
2. `Cmd + C` (Mac) 또는 `Ctrl + C` (Windows)를 눌러 복사합니다

---

## 4단계: SQL Editor에 붙여넣기

### 4-1. SQL Editor의 텍스트 박스에 붙여넣기
1. Supabase 대시보드의 SQL Editor 화면으로 돌아갑니다
2. 왼쪽의 큰 텍스트 박스(쿼리 입력 영역)를 클릭합니다
3. `Cmd + V` (Mac) 또는 `Ctrl + V` (Windows)를 눌러 붙여넣습니다

### 4-2. 확인하기
- 텍스트 박스에 SQL 코드가 들어가 있는지 확인합니다
- 코드가 잘 보이도록 텍스트 박스가 충분히 크게 보이는지 확인합니다

---

## 5단계: SQL 실행하기

### 5-1. 실행 버튼 찾기
SQL Editor 화면에서 실행 버튼을 찾습니다:
- **"Run"** 버튼
- **"Execute"** 버튼
- 또는 **▶️ (재생 아이콘)** 버튼
- 보통 텍스트 박스 아래쪽이나 오른쪽에 있습니다

### 5-2. 실행하기
1. 실행 버튼을 클릭합니다
2. 잠시 기다립니다 (1-2초 정도)

### 5-3. 결과 확인하기
실행 후 다음 중 하나가 나타납니다:

**성공한 경우:**
- 오른쪽 또는 아래에 "Success" 또는 "Query executed successfully" 메시지가 나타납니다
- 또는 "0 rows returned" 같은 메시지가 나타납니다 (이것도 정상입니다!)

**에러가 난 경우:**
- 빨간색 에러 메시지가 나타납니다
- 에러 메시지를 읽어보고, 아래 "문제 해결" 섹션을 참고하세요

---

## 6단계: 테이블이 생성되었는지 확인하기

### 6-1. Table Editor로 이동
1. 왼쪽 메뉴에서 **"Table Editor"**를 클릭합니다
2. 또는 **"Database"** → **"Tables"**를 클릭합니다

### 6-2. 테이블 목록 확인
- 테이블 목록에서 **"partner_mylinks"**를 찾습니다
- 보이면 성공입니다! ✅

### 6-3. 테이블 구조 확인 (선택사항)
- `partner_mylinks` 테이블을 클릭하면 테이블 구조를 볼 수 있습니다
- 컬럼들이 보이면 정상입니다:
  - id
  - partner_id
  - from
  - to
  - departure_date
  - return_date
  - 등등...

---

## ✅ 완료!

이제 Supabase에 `partner_mylinks` 테이블이 생성되었습니다!

다음 단계는 환경변수 설정입니다. 준비되면 알려주세요!

---

## 🆘 문제 해결

### 문제 1: SQL Editor를 찾을 수 없어요
**해결:**
- 왼쪽 메뉴를 아래로 스크롤해보세요
- 또는 검색창에 "SQL"을 입력해보세요
- 그래도 안 되면: 왼쪽 메뉴에서 "Database" → "SQL Editor" 경로로 들어가보세요

### 문제 2: 실행 버튼을 찾을 수 없어요
**해결:**
- 텍스트 박스 아래쪽을 확인해보세요
- 또는 키보드 단축키를 사용해보세요: `Cmd + Enter` (Mac) 또는 `Ctrl + Enter` (Windows)

### 문제 3: 에러가 발생했어요
**에러 메시지 예시:**
- `relation "partner_mylinks" already exists` → 이미 테이블이 존재합니다. 정상입니다!
- `syntax error` → SQL 코드에 오타가 있을 수 있습니다. 다시 복사해보세요
- `permission denied` → 권한 문제입니다. 프로젝트 관리자에게 문의하세요

**해결:**
- 에러 메시지를 복사해서 알려주시면 도와드리겠습니다!

### 문제 4: 테이블이 보이지 않아요
**해결:**
1. Table Editor에서 새로고침 버튼을 눌러보세요
2. 또는 SQL Editor에서 다음 쿼리를 실행해보세요:
   ```sql
   SELECT * FROM public.partner_mylinks LIMIT 1;
   ```
   - 에러가 나지 않으면 테이블이 생성된 것입니다!

---

## 📸 참고: 화면 구성

```
┌─────────────────────────────────────────┐
│  Supabase Dashboard                     │
├──────────┬──────────────────────────────┤
│          │                              │
│  메뉴    │  메인 화면                    │
│          │                              │
│  - Table │                              │
│  - Auth  │                              │
│  - DB    │                              │
│  - SQL   │  ← SQL Editor 클릭!          │
│  - ...   │                              │
│          │                              │
└──────────┴──────────────────────────────┘
```

SQL Editor 화면:
```
┌─────────────────────────────────────────┐
│  SQL Editor                             │
├─────────────────────────────────────────┤
│                                         │
│  [여기에 SQL 코드 붙여넣기]              │
│                                         │
│                                         │
├─────────────────────────────────────────┤
│  [Run] 버튼 ← 여기 클릭!                │
└─────────────────────────────────────────┘
```

---

## 다음 단계

테이블 생성이 완료되면:
1. ✅ 환경변수 설정하기
2. ✅ 마이링크 생성 스크립트 실행하기
3. ✅ 프론트엔드에서 테스트하기

준비되면 알려주세요! 🚀

